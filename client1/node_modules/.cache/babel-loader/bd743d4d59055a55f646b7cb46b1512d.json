{"ast":null,"code":"var _jsxFileName = \"/Users/ashwal/Desktop/fullstack/coding-web-app/client/src/components/CodeBlock.js\";\nimport React, { useEffect, useState } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { DataBase } from '../back/DataBase';\nimport { Link } from 'react-router-dom';\nimport { HiArrowCircleLeft } from \"react-icons/hi\";\nimport SyntaxHighlighter from 'react-syntax-highlighter';\nimport { docco } from 'react-syntax-highlighter/dist/esm/styles/hljs';\nimport socket from '../socket';\nconst CodeBlock = () => {\n  const {\n    id\n  } = useParams();\n  const [code, setCode] = useState('');\n  const [title, setTitle] = useState('');\n  const [role, setRole] = useState(null);\n  const [flag, setflag] = useState(true);\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        if (flag) {\n          socket.on('role', role => {\n            setRole(role);\n            console.log(role);\n          });\n          setflag(false);\n        }\n        const data = await DataBase.getCode(id);\n        setCode(data.code);\n        setTitle(data.title);\n      } catch (error) {\n        console.error('Error fetching code block:', error);\n      }\n    };\n    socket.emit('joinRoom', \"Lobby\");\n    fetchData();\n\n    // Listen for updated code from the server\n    socket.on('newUpdatedCode', updatedCode => {\n      setCode(updatedCode);\n    });\n  }, []);\n  const handleSubmit = async e => {\n    e.preventDefault();\n    try {\n      await DataBase.updateDocument(id, code);\n      window.location.reload();\n    } catch (error) {\n      console.error('Error adding code block:', error);\n    }\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(HiArrowCircleLeft, {\n    className: \"btn-submit-back\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group-code\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"head\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 17\n    }\n  }, \" Code: \", title), role === 'writer' ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"textarea\", {\n    className: \"textarea-code\",\n    id: \"code\",\n    value: code,\n    onChange: e => {\n      setCode(e.target.value);\n      socket.emit('updatedCode', e.target.value);\n    },\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleSubmit,\n    className: \"btn-submit-save\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 25\n    }\n  }, \" Save \")) : /*#__PURE__*/React.createElement(SyntaxHighlighter, {\n    language: \"javascript\",\n    style: docco,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 21\n    }\n  }, code), /*#__PURE__*/React.createElement(SyntaxHighlighter, {\n    language: \"javascript\",\n    style: docco,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 17\n    }\n  }, code)));\n};\nexport default CodeBlock;","map":{"version":3,"names":["React","useEffect","useState","useParams","DataBase","Link","HiArrowCircleLeft","SyntaxHighlighter","docco","socket","CodeBlock","id","code","setCode","title","setTitle","role","setRole","flag","setflag","fetchData","on","console","log","data","getCode","error","emit","updatedCode","handleSubmit","e","preventDefault","updateDocument","window","location","reload","createElement","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","to","className","Fragment","value","onChange","target","required","onClick","language","style"],"sources":["/Users/ashwal/Desktop/fullstack/coding-web-app/client/src/components/CodeBlock.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { DataBase } from '../back/DataBase';\nimport { Link } from 'react-router-dom';\nimport { HiArrowCircleLeft } from \"react-icons/hi\";\nimport SyntaxHighlighter from 'react-syntax-highlighter';\nimport { docco } from 'react-syntax-highlighter/dist/esm/styles/hljs';\nimport socket from '../socket';\n\n\nconst CodeBlock = () => {\n    const { id } = useParams();\n    const [code, setCode] = useState('');\n    const [title, setTitle] = useState('');\n    const [role, setRole] = useState(null);\n    const [flag, setflag] = useState(true);\n    useEffect(() => {\n        const fetchData = async () => {\n            try {\n                if (flag) {\n                    socket.on('role', (role) => {\n                        setRole(role);\n                        console.log(role)\n                    });\n                    setflag(false);\n                }\n                const data = await DataBase.getCode(id);\n                setCode(data.code);\n                setTitle(data.title)\n\n\n            } catch (error) {\n                console.error('Error fetching code block:', error);\n            }\n        };\n        socket.emit('joinRoom', \"Lobby\");\n        fetchData();\n\n        // Listen for updated code from the server\n        socket.on('newUpdatedCode', (updatedCode) => {\n            setCode(updatedCode);\n        });\n\n    }, []);\n\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n        try {\n            await DataBase.updateDocument(id, code);\n            window.location.reload();\n        } catch (error) {\n            console.error('Error adding code block:', error);\n        }\n    };\n    return (\n        <div>\n            <Link to=\"/\">\n                <HiArrowCircleLeft className=\"btn-submit-back\"></HiArrowCircleLeft>\n            </Link>\n            <div className=\"form-group-code\">\n                <div className='head'> Code: {title}</div>\n                {role === 'writer' ? (\n                    <>\n                        <textarea className='textarea-code' id=\"code\" value={code} onChange={(e) => { setCode(e.target.value); socket.emit('updatedCode', e.target.value); }} required />\n                        <button onClick={handleSubmit} className=\"btn-submit-save\"> Save </button>\n                    </>\n                ) : (\n                    <SyntaxHighlighter language=\"javascript\" style={docco}>\n                        {code}\n                    </SyntaxHighlighter>\n                )}\n                <SyntaxHighlighter language=\"javascript\" style={docco}>\n                    {code}\n                </SyntaxHighlighter>\n            </div>\n        </div>\n    );\n};\nexport default CodeBlock;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}